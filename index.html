<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProHospitalar - Sistema ERP Completo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        .active-tab { background: linear-gradient(135deg, #059669, #047857); color: white; }
        .card-hover:hover { transform: translateY(-3px); box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1); transition: all 0.3s ease; }
        .progress-bar { transition: width 0.8s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeIn 0.6s ease-out; }
        .gradient-bg { background: linear-gradient(135deg, #059669 0%, #047857 100%); }
        .shadow-premium { box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); }
        .btn-export { background: linear-gradient(135deg, #10b981, #059669); transition: all 0.3s ease; }
        .btn-export:hover { background: linear-gradient(135deg, #059669, #047857); transform: translateY(-2px); }
        .notification-badge { position: absolute; top: -5px; right: -5px; background: #ef4444; color: white; border-radius: 50%; width: 20px; height: 20px; font-size: 12px; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .status-online { width: 8px; height: 8px; background: #10b981; border-radius: 50%; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); }
        .modal-content { background-color: white; margin: 2% auto; padding: 0; border-radius: 15px; width: 90%; max-width: 800px; max-height: 90vh; overflow-y: auto; box-shadow: 0 25px 50px rgba(0,0,0,0.3); }
        .modal-header { background: linear-gradient(135deg, #059669, #047857); color: white; padding: 20px; border-radius: 15px 15px 0 0; }
        .modal-body { padding: 30px; }
        .close { color: white; float: right; font-size: 28px; font-weight: bold; cursor: pointer; }
        .close:hover { color: #f0f0f0; }
        input, select, textarea { width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 8px; margin-top: 5px; }
        input:focus, select:focus, textarea:focus { outline: none; border-color: #059669; }
        label { font-weight: 600; color: #374151; margin-top: 15px; display: block; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header ProHospitalar -->
    <header class="gradient-bg text-white shadow-2xl">
        <div class="container mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <div class="w-12 h-12 bg-white bg-opacity-20 rounded-xl flex items-center justify-center text-2xl">üè•</div>
                    <div>
                        <h1 class="text-2xl font-bold">ProHospitalar</h1>
                        <p class="text-green-100 text-sm">Sistema ERP - Gest√£o Empresarial</p>
                    </div>
                </div>
                <div class="flex items-center space-x-6">
                    <div class="relative">
                        <button onclick="mostrarNotificacoes()" class="p-2 bg-white bg-opacity-20 rounded-lg hover:bg-opacity-30 transition-all">
                            üîî<div class="notification-badge" id="notification-count">3</div>
                        </button>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="status-online"></div>
                        <span class="text-sm text-green-100">Online</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <div class="text-right">
                            <p class="text-sm font-medium">Admin ProHospitalar</p>
                            <p class="text-xs text-green-100">Conectado agora</p>
                        </div>
                        <div class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center">üë®‚Äçüíº</div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="flex">
        <!-- Sidebar -->
        <div class="w-80 bg-white shadow-2xl min-h-screen">
            <nav class="mt-6">
                <div class="px-4 space-y-1">
                    <button onclick="showTab('dashboard')" id="tab-dashboard" class="w-full flex items-center space-x-4 px-4 py-3 rounded-lg transition-all active-tab">
                        <span class="text-xl">üìä</span>
                        <div class="flex-1 text-left">
                            <span class="font-medium">Dashboard</span>
                            <p class="text-xs opacity-80">Painel Executivo</p>
                        </div>
                    </button>
                    <button onclick="showTab('vendas')" id="tab-vendas" class="w-full flex items-center space-x-4 px-4 py-3 rounded-lg transition-all text-gray-700 hover:bg-gray-100">
                        <span class="text-xl">üí∞</span>
                        <div class="flex-1 text-left">
                            <span class="font-medium">Vendas</span>
                            <p class="text-xs text-gray-500">Pedidos e faturamento</p>
                        </div>
                        <div class="notification-badge" id="vendas-count">8</div>
                    </button>
                    <button onclick="showTab('clientes')" id="tab-clientes" class="w-full flex items-center space-x-4 px-4 py-3 rounded-lg transition-all text-gray-700 hover:bg-gray-100">
                        <span class="text-xl">üè•</span>
                        <div class="flex-1 text-left">
                            <span class="font-medium">Clientes</span>
                            <p class="text-xs text-gray-500">Hospitais e Cl√≠nicas</p>
                        </div>
                    </button>
                    <button onclick="showTab('estoque')" id="tab-estoque" class="w-full flex items-center space-x-4 px-4 py-3 rounded-lg transition-all text-gray-700 hover:bg-gray-100">
                        <span class="text-xl">ü©∫</span>
                        <div class="flex-1 text-left">
                            <span class="font-medium">Produtos</span>
                            <p class="text-xs text-gray-500">Equipamentos m√©dicos</p>
                        </div>
                        <div class="text-xs bg-red-100 text-red-600 px-2 py-1 rounded font-medium">12 baixos</div>
                    </button>
                    <button onclick="showTab('vendedores')" id="tab-vendedores" class="w-full flex items-center space-x-4 px-4 py-3 rounded-lg transition-all text-gray-700 hover:bg-gray-100">
                        <span class="text-xl">üë®‚Äçüíº</span>
                        <div class="flex-1 text-left">
                            <span class="font-medium">Representantes</span>
                            <p class="text-xs text-gray-500">Equipe comercial</p>
                        </div>
                    </button>
                    <button onclick="showTab('fornecedores')" id="tab-fornecedores" class="w-full flex items-center space-x-4 px-4 py-3 rounded-lg transition-all text-gray-700 hover:bg-gray-100">
                        <span class="text-xl">üè≠</span>
                        <div class="flex-1 text-left">
                            <span class="font-medium">Fornecedores</span>
                            <p class="text-xs text-gray-500">Ind√∫stria m√©dica</p>
                        </div>
                    </button>
                    <button onclick="showTab('financeiro')" id="tab-financeiro" class="w-full flex items-center space-x-4 px-4 py-3 rounded-lg transition-all text-gray-700 hover:bg-gray-100">
                        <span class="text-xl">üí≥</span>
                        <div class="flex-1 text-left">
                            <span class="font-medium">Financeiro</span>
                            <p class="text-xs text-gray-500">Fluxo de caixa</p>
                        </div>
                    </button>
                    <button onclick="showTab('fiscal')" id="tab-fiscal" class="w-full flex items-center space-x-4 px-4 py-3 rounded-lg transition-all text-gray-700 hover:bg-gray-100">
                        <span class="text-xl">üßæ</span>
                        <div class="flex-1 text-left">
                            <span class="font-medium">Fiscal</span>
                            <p class="text-xs text-gray-500">DAV, NFe</p>
                        </div>
                        <div class="notification-badge">3</div>
                    </button>
                    <button onclick="showTab('relatorios')" id="tab-relatorios" class="w-full flex items-center space-x-4 px-4 py-3 rounded-lg transition-all text-gray-700 hover:bg-gray-100">
                        <span class="text-xl">üìà</span>
                        <div class="flex-1 text-left">
                            <span class="font-medium">Relat√≥rios</span>
                            <p class="text-xs text-gray-500">Analytics</p>
                        </div>
                    </button>
                </div>
                <div class="mt-8 px-4">
                    <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wide mb-3">A√ß√µes R√°pidas</h3>
                    <div class="space-y-2">
                        <button onclick="openModal('venda')" class="w-full bg-green-50 text-green-700 px-3 py-2 rounded-lg text-sm hover:bg-green-100 transition-colors font-medium">‚ûï Nova Venda</button>
                        <button onclick="openModal('produto')" class="w-full bg-blue-50 text-blue-700 px-3 py-2 rounded-lg text-sm hover:bg-blue-100 transition-colors font-medium">ü©∫ Novo Produto</button>
                        <button onclick="openModal('cliente')" class="w-full bg-purple-50 text-purple-700 px-3 py-2 rounded-lg text-sm hover:bg-purple-100 transition-colors font-medium">üè• Novo Cliente</button>
                        <button onclick="gerarDAV()" class="w-full bg-orange-50 text-orange-700 px-3 py-2 rounded-lg text-sm hover:bg-orange-100 transition-colors font-medium">üìÑ Gerar DAV</button>
                    </div>
                </div>
                <div class="mt-8 mx-4 p-4 bg-green-50 rounded-xl border border-green-200">
                    <div class="text-center">
                        <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2">
                            <span class="text-2xl">üè•</span>
                        </div>
                        <h4 class="font-bold text-green-800">ProHospitalar</h4>
                        <p class="text-xs text-green-600 mt-1">Solu√ß√µes em Equipamentos M√©dicos</p>
                        <p class="text-xs text-green-500 mt-2 font-medium">Sistema ERP v2.0</p>
                    </div>
                </div>
            </nav>
        </div>

        <!-- Conte√∫do Principal -->
        <div class="flex-1 p-8 overflow-y-auto" style="max-height: calc(100vh - 80px);">
            <!-- Dashboard -->
            <div id="dashboard" class="fade-in">
                <div class="flex justify-between items-center mb-8">
                    <div>
                        <h2 class="text-3xl font-bold text-gray-900">Dashboard ProHospitalar</h2>
                        <p class="text-gray-600 mt-1">Gest√£o completa de equipamentos m√©dico-hospitalares</p>
                    </div>
                    <button onclick="exportarDashboard()" class="btn-export text-white px-6 py-3 rounded-lg flex items-center space-x-2 shadow-lg">
                        <span>üìä</span><span>Exportar Dashboard</span>
                    </button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8">
                    <div class="bg-gradient-to-br from-green-500 to-emerald-600 p-6 rounded-2xl text-white card-hover shadow-premium">
                        <h3 class="text-green-100 text-sm mb-1">Vendas do M√™s</h3>
                        <p class="text-3xl font-bold" id="total-vendas-mes">R$ 685.490</p>
                    </div>
                    <div class="bg-gradient-to-br from-blue-500 to-blue-600 p-6 rounded-2xl text-white card-hover shadow-premium">
                        <h3 class="text-blue-100 text-sm mb-1">Lucro Bruto</h3>
                        <p class="text-3xl font-bold" id="total-lucro">R$ 261.857</p>
                    </div>
                    <div class="bg-gradient-to-br from-purple-500 to-purple-600 p-6 rounded-2xl text-white card-hover shadow-premium">
                        <h3 class="text-purple-100 text-sm mb-1">Clientes Ativos</h3>
                        <p class="text-3xl font-bold" id="total-clientes">347</p>
                    </div>
                    <div class="bg-gradient-to-br from-orange-500 to-red-500 p-6 rounded-2xl text-white card-hover shadow-premium">
                        <h3 class="text-orange-100 text-sm mb-1">Produtos Ativos</h3>
                        <p class="text-3xl font-bold" id="total-produtos">2.847</p>
                    </div>
                    <div class="bg-gradient-to-br from-indigo-500 to-purple-600 p-6 rounded-2xl text-white card-hover shadow-premium">
                        <h3 class="text-indigo-100 text-sm mb-1">Meta do M√™s</h3>
                        <p class="text-3xl font-bold">91%</p>
                    </div>
                </div>
                <div class="bg-white p-8 rounded-2xl shadow-premium mb-8">
                    <h3 class="text-xl font-bold text-gray-900 mb-6">üìä Vendas por Categoria Hospitalar</h3>
                    <canvas id="chartVendasCategorias" width="800" height="300"></canvas>
                </div>
            </div>

            <!-- Vendas -->
            <div id="vendas" class="hidden">
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-900">üí∞ Gest√£o de Vendas</h2>
                    <button onclick="exportarVendas()" class="btn-export text-white px-6 py-3 rounded-lg shadow-lg">üìÑ Exportar</button>
                </div>
                <div class="bg-white rounded-xl shadow-premium overflow-hidden">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ID</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Cliente</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Produto</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Valor</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="lista-vendas"></tbody>
                    </table>
                </div>
            </div>

            <!-- Clientes -->
            <div id="clientes" class="hidden">
                <h2 class="text-3xl font-bold text-gray-900 mb-8">üè• Gest√£o de Clientes</h2>
                <div class="bg-white rounded-xl shadow-premium overflow-hidden">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Nome</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">CNPJ</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Cidade</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="lista-clientes"></tbody>
                    </table>
                </div>
            </div>

            <!-- Produtos -->
            <div id="estoque" class="hidden">
                <h2 class="text-3xl font-bold text-gray-900 mb-8">ü©∫ Gest√£o de Produtos</h2>
                <div class="bg-white rounded-xl shadow-premium overflow-hidden">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">C√≥digo</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Produto</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Quantidade</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Pre√ßo</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="lista-produtos"></tbody>
                    </table>
                </div>
            </div>

            <!-- Representantes -->
            <div id="vendedores" class="hidden">
                <h2 class="text-3xl font-bold text-gray-900 mb-8">üë®‚Äçüíº Representantes</h2>
                <div class="bg-white rounded-xl shadow-premium overflow-hidden">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Nome</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Regi√£o</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Vendas</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Performance</th>
                            </tr>
                        </thead>
                        <tbody id="lista-representantes"></tbody>
                    </table>
                </div>
            </div>

            <!-- Fornecedores -->
            <div id="fornecedores" class="hidden">
                <h2 class="text-3xl font-bold text-gray-900 mb-8">üè≠ Fornecedores</h2>
                <div class="bg-white rounded-xl shadow-premium overflow-hidden">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Nome</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">CNPJ</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Especialidade</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                            </tr>
                        </thead>
                        <tbody id="lista-fornecedores"></tbody>
                    </table>
                </div>
            </div>

            <!-- Financeiro -->
            <div id="financeiro" class="hidden">
                <h2 class="text-3xl font-bold text-gray-900 mb-8">üí≥ Financeiro</h2>
                <div class="bg-white rounded-xl shadow-premium overflow-hidden">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Data</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Descri√ß√£o</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Valor</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                            </tr>
                        </thead>
                        <tbody id="lista-transacoes"></tbody>
                    </table>
                </div>
            </div>

            <!-- Fiscal -->
            <div id="fiscal" class="hidden">
                <h2 class="text-3xl font-bold text-gray-900 mb-8">üßæ Documentos Fiscais</h2>
                <div class="bg-white rounded-xl shadow-premium p-6">
                    <p class="text-gray-600">M√≥dulo de documentos fiscais (DAV, NFe) em desenvolvimento.</p>
                </div>
            </div>

            <!-- Relat√≥rios -->
            <div id="relatorios" class="hidden">
                <h2 class="text-3xl font-bold text-gray-900 mb-8">üìà Relat√≥rios</h2>
                <div class="bg-white rounded-xl shadow-premium p-6">
                    <p class="text-gray-600">Centro de relat√≥rios e analytics em desenvolvimento.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL NOVA VENDA -->
    <div id="modalVenda" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close" onclick="closeModal('modalVenda')">&times;</span>
                <h2 class="text-2xl font-bold">üí∞ Nova Venda</h2>
            </div>
            <div class="modal-body">
                <form id="formVenda" onsubmit="salvarVenda(event)">
                    <label>Cliente *</label>
                    <select id="venda-cliente" required>
                        <option value="">Selecione um cliente</option>
                    </select>

                    <label>Produto *</label>
                    <select id="venda-produto" required onchange="atualizarPrecoVenda()">
                        <option value="">Selecione um produto</option>
                    </select>

                    <label>Representante *</label>
                    <select id="venda-representante" required>
                        <option value="">Selecione um representante</option>
                    </select>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label>Quantidade *</label>
                            <input type="number" id="venda-quantidade" min="1" value="1" required onchange="calcularTotalVenda()">
                        </div>
                        <div>
                            <label>Valor Unit√°rio *</label>
                            <input type="number" id="venda-valor-unitario" step="0.01" readonly required>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label>Desconto (%)</label>
                            <input type="number" id="venda-desconto" min="0" max="100" value="0" step="0.01" onchange="calcularTotalVenda()">
                        </div>
                        <div>
                            <label>Total *</label>
                            <input type="text" id="venda-total" readonly class="bg-gray-100 font-bold text-green-600 text-xl">
                        </div>
                    </div>

                    <label>Forma de Pagamento *</label>
                    <select id="venda-pagamento" required>
                        <option value="">Selecione</option>
                        <option value="√Ä Vista">√Ä Vista</option>
                        <option value="Cart√£o de Cr√©dito">Cart√£o de Cr√©dito</option>
                        <option value="Boleto">Boleto</option>
                        <option value="Transfer√™ncia">Transfer√™ncia</option>
                        <option value="Cheque">Cheque</option>
                    </select>

                    <label>Observa√ß√µes</label>
                    <textarea id="venda-obs" rows="3" placeholder="Informa√ß√µes adicionais sobre a venda..."></textarea>

                    <div class="flex justify-end space-x-3 mt-6">
                        <button type="button" onclick="closeModal('modalVenda')" class="px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300">Cancelar</button>
                        <button type="submit" class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">üíæ Salvar Venda</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- MODAL NOVO PRODUTO -->
    <div id="modalProduto" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close" onclick="closeModal('modalProduto')">&times;</span>
                <h2 class="text-2xl font-bold">ü©∫ Novo Produto</h2>
            </div>
            <div class="modal-body">
                <form id="formProduto" onsubmit="salvarProduto(event)">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label>C√≥digo do Produto *</label>
                            <input type="text" id="produto-codigo" required placeholder="Ex: MC-500">
                        </div>
                        <div>
                            <label>Categoria *</label>
                            <select id="produto-categoria" required>
                                <option value="">Selecione</option>
                                <option value="Monitoramento">Monitoramento</option>
